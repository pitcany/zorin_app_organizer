#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

export PYBUILD_NAME=unified-package-manager

%:
	dh $@ --with python3 --buildsystem=pybuild

override_dh_auto_clean:
	dh_auto_clean
	rm -rf build/
	rm -rf *.egg-info/
	find . -name __pycache__ -type d -exec rm -rf {} +
	find . -name "*.pyc" -delete

override_dh_auto_install:
	dh_auto_install
	# Install desktop entry
	install -D -m 0644 data/upm.desktop debian/unified-package-manager/usr/share/applications/upm.desktop
	# Install icon
	install -D -m 0644 data/upm.svg debian/unified-package-manager/usr/share/icons/hicolor/scalable/apps/upm.svg
	# Install documentation
	install -D -m 0644 README.md debian/unified-package-manager/usr/share/doc/unified-package-manager/README.md

override_dh_installdocs:
	dh_installdocs README.md

override_dh_installchangelogs:
	dh_installchangelogs
